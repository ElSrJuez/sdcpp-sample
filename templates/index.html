<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AI Image Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-nav">
                <div class="nav-spacer"></div>
                <div class="header-content">
                    <h1>AI Image Generator</h1>
                    <p>Create stunning images with AI</p>
                </div>
                <a href="/gallery" class="nav-link">Gallery</a>
            </div>
        </header>

        <main class="main">
            <form class="prompt-form" id="promptForm">
                <div class="input-group">
                    <textarea 
                        id="promptInput" 
                        class="prompt-input" 
                        placeholder="Describe the image you want to generate..."
                        maxlength="{{ max_prompt_length }}"
                        required
                    ></textarea>
                    <div class="char-counter">
                        <span id="charCount">0</span>/{{ max_prompt_length }}
                    </div>
                </div>
                
                <!-- Size Selector -->
                <div class="control-group">
                    <label class="control-label">Size</label>
                    <div class="size-options">
                        <input type="radio" id="size256" name="size" value="256x256">
                        <label for="size256" class="size-btn">Small<br><span class="size-detail">256×256</span></label>
                        
                        <input type="radio" id="size512" name="size" value="512x512" checked>
                        <label for="size512" class="size-btn">Medium<br><span class="size-detail">512×512</span></label>
                        
                        <input type="radio" id="size1024w" name="size" value="1024x512">
                        <label for="size1024w" class="size-btn">Wide<br><span class="size-detail">1024×512</span></label>
                        
                        <input type="radio" id="size1024h" name="size" value="512x1024">
                        <label for="size1024h" class="size-btn">Tall<br><span class="size-detail">512×1024</span></label>
                        
                        <input type="radio" id="size1024" name="size" value="1024x1024">
                        <label for="size1024" class="size-btn">Large<br><span class="size-detail">1024×1024</span></label>
                    </div>
                </div>

                <!-- Quality Presets -->
                <div class="control-group">
                    <label class="control-label">Quality</label>
                    <div class="quality-options">
                        <input type="radio" id="qualityLow" name="quality" value="low" checked>
                        <label for="qualityLow" class="quality-btn">Low<br><span class="quality-detail">Fast (4 steps)</span></label>
                        
                        <input type="radio" id="qualityMedium" name="quality" value="medium">
                        <label for="qualityMedium" class="quality-btn">Medium<br><span class="quality-detail">10 steps</span></label>
                        
                        <input type="radio" id="qualityHigh" name="quality" value="high">
                        <label for="qualityHigh" class="quality-btn">High<br><span class="quality-detail">Best (20 steps)</span></label>
                    </div>
                </div>
                
                <button type="submit" class="generate-btn" id="generateBtn">
                    <span class="btn-text">Generate Image</span>
                    <span class="btn-loader" id="loader"></span>
                </button>
            </form>

            <div class="result-area" id="resultArea">
                <div class="image-container" id="imageContainer">
                    <!-- Generated image will appear here -->
                </div>
                
                <div class="error-message" id="errorMessage">
                    <!-- Error messages will appear here -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Pass config from backend to frontend
        window.APP_CONFIG = {
            maxPromptLength: {{ max_prompt_length }},
            polling: {
                intervalMs: {{ polling_config.interval_ms }},
                maxTimeMs: {{ polling_config.max_time_ms }},
                maxRetries: {{ polling_config.max_retries }}
            }
        };
    </script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>